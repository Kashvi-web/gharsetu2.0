<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WonderLust</title>
</head> -->
<% layout("/layouts/boilerplate") %>   
    <!-- <h3>All Listings</h3> -->
    <!-- comment create new listing button this is use on navbar -->
    <!-- <form method="get" action="/listings/new">
        <button>Create New Listing</button>
    </form> -->
    <link rel="stylesheet" href="/css/filter.css">
    <div class="filters-main">
        <div id="filters">
            <div class="left_img_button" id="slideButton" style="display: none;">
                <i class="fa-solid fa-angle-left"></i>
            </div>
            <a href="/listings/">
                <div class="filter ALL ps-2 pe-2">
                    <div><img src="/Icon/0.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p style="text-decoration: none;">ALL</p>
                </div>
            </a>
            <a href="/listings/filter/Cabins">
                <div class="filter Cabins">
                    <div><img src="/Icon/2.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;PG&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Omg">
                <div class="filter OMG">
                    <div><img src="/Icon/3.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Flat&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Lake">
                <div class="filter Lake">
                    <div><img src="/Icon/4.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Villa&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Design">
                <div class="filter Design">
                    <div><img src="/Icon/5.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Plot&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Pools">
                <div class="filter Amazing-pools">
                    <div><img src="/Icon/6.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>1BHK</p>
                </div>
            </a>
            <a href="/listings/filter/Farms">
                <div class="filter Farms">
                    <div><img src="/Icon/7.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;2BHK&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Views">
                <div class="filter Amazing-views">
                    <div><img src="/Icon/8.png" alt="icon" style="width: 25px; height: 25px;"></div>
                    <p>3BHK</p>
                </div>
            </a>
            <div class="right_img_button" id="slideButton">
                <i class="fa-solid fa-angle-right"></i>
            </div>
        </div>
        <div class="tax-toggle tax-filter-icon filterIcon me-2 ms-2 " onclick="filterClick()">
            <div class="form-check form-switch form-check-reverse pe-1" style="cursor: pointer;">
                <i class="fa-solid fa-sliders" id="filter-icon"></i>
                <label class="form-check-label" for="filter-icon" style="cursor: pointer;">Filters</label>
            </div>
        </div>
        <div class="tax-toggle tax-filter-icon-small filterIcon me-2 ms-2 " onclick="filterClick()">
            <div class="form-check form-switch form-check-reverse pe-0">
                <i class="fa-solid fa-sliders ps-1" id="filter-icon" style="cursor: pointer;"></i>
            </div>
        </div>
        <div class="tax-toggle tax-filter ">
            <div class="form-check form-switch form-check-reverse" >
                <input class="form-check-input tax-switch shadow-none" type="checkbox" role="switch" id="flexSwitchCheckDefault" style="cursor: pointer;">
                <label class="form-check-label changeAfter" for="flexSwitchCheckDefault" style="cursor: pointer; margin-top: 3px;">Display total before taxes</label>
            </div>
        </div>
    </div>
    <div class="tax-toggle tax-sticky">
        <div class="form-check form-switch form-check-reverse">
            <input class="form-check-input tax-switch tax-sticky-sticky shadow-none" type="checkbox" role="switch" id="flexSwitchCheckDefaultS" style="cursor: pointer;">
            <label class="form-check-label changeAfter" for="flexSwitchCheckDefaultS" style="cursor: pointer;">Display total before taxes</label>
        </div>
    </div>
    <div class="row row-cols-xxl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-1">
        <% for (const listing of allListing) { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
                <div class="card col listing-card index-res">
                    <div class="index-res-img">
                        <div class="card-img">
                            <img class="heart heart-r" src="/Icon/heart-red.png" alt="like" style="opacity: 1; z-index: 5;">
                            <img class="heart heart-b" src="/Icon/heart-black.png" alt="like" style="z-index: 6;">
                            <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image" />
                        </div>
                        <!-- set date  -->
                        <!-- <%
                        let day =Math.floor(Math.random() * 4 + 2);
                        let no = Math.floor(Math.random() * 28 + 1);
                        let date = (new Date('2023-11-01')).getDate() + no;         //today ----
                        let dateA = (new Date('2023-11-01')).getDate() + no + day;    //today + day ----
                        let month = Date().split(" ")[1];
                         %> -->
                        <div class="card-body mt-1 ms-2">
                            <p class="card-text" style="display: block;">
                                <b><%= listing.title %></b> <br>
                                <span>&nbsp;<%= listing.location %>, <%= listing.country %></span>
                                <span style="display: block;"></span>
                                <span class="price-info"><span class=" fw-bold">&nbsp;&#8377;<%= listing.price.toLocaleString("en-IN") %> </span> </span>
                                <i class="tax-info tax-underline ms-1"><i class="rs-sign"><b> &#8377;</i><%= (listing.price*1.18).toLocaleString("en-In") %></b> &nbsp;total after taxes</i>
                            </p>
                        </div>
                    </div>
                </div>
            </a>
        <% } %>
    </div>
<script defer src="/js/filter.js"></script>
<script>
    // let heartR = document.querySelectorAll(".heart-r")
    // let heartB = document.querySelectorAll(".heart-b")
    // for (const heartb of heartB) {
    //     heartb.addEventListener("click", ()=>{
    //         heartb.style.zIndex = "4"
    //     })
    // }
    // for (const heartr of heartR) {
    //     heartr.addEventListener("click", ()=>{
    //         heartr.style.zIndex = "3"
    //     })
    // }

    // let heart1 = document.querySelectorAll(".heart")
    // // for (const heart1 of heart) {
    // for(let i = 1; i<  heart1.length; i++){
    //     console.log(heart1[i])
    //     heart1[i].addEventListener("click", ()=>{
    //         // console.log(`click heart: ${heart1[i]}`)
    //     // heart1.addEventListener("click", ()=>{
    //     //     for (const h of heart1) {
    //     //         // console.log(h)
    //     //         h[0].style.zIndex = "4"
    //     //         h[1].style.zIndex = "3"
    //     //     }
    //     })
    // }

</script>